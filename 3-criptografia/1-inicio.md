# Tecnica de cifra en flujo

El mensaje en claro se leerá bit a bit
Realiza una operación de cifra (usualmente XOR) entre el mensaje en claro y una secuencia de bits generada por un algoritmo de cifra en flujo. Debe cumplir con las siguientes propiedades:
- La secuencia de bits generada debe ser del mismo tamaño que el mensaje en claro.
- La secuencia de bits generada debe ser aleatoria.




```ruby

Actually, Ingles que la technologies, okay? Because intranas de the cryptographical over here. Un cifrado de flujo simple pero si si me preguntan si eso vendrá factoreado La respuesta, es obvio que vendavallado pero los gringos han hecho lo mismo accidentes han hecho lo mismo desde el proyecto ecolon y el Prince que es una han espiado y ya saben ustedes lo que les conté al principio del curso de los implantes en los por debajo de la bios en casi todos los dispositivos Entonces esto es una doble moral seguramente No se les olvida. Además que China tiene el súper cortafuegos, no ellos tienen un súper Fireball del del que eso es del tamaño del datacenter de Google que filtra todo el tráfico que entra y sale y de la china para controlar pues lo que finalmente termina siendo una una un híbrido de Dictadura no importa ideológicamente si sea de comunista o si sea fascista lo que sea dictadura es dictadura cierto y allí efectivamente el El el el control de de la restricción a muchas cosas es es muy fuerte por el gran súper aquí hay. Un término que lo pongo por aquí más adelante. Bueno, no estaba por allá que notado estos estas secuencias se llaman secuencias pseudocifrantes, son algoritmos determinísticos por una cosa muy particular Y es que los Y esto es uno de los grandes problemas, que se enfrenta la criptografía moderna y que entre otras cosas rompe la criptografía cuántica y es uno de los problemas que se está trabajando duro en la criptografía cuántica Y es que las Yo ya les había dicho que todo lo que hacemos en línea está negociando claves permanentemente una cosa, son las claves que escogemos nosotros como humanos la clave que que tú escoges para autenticarte un sistema lo que sea, pero los humanos somos malos para escoger claves, no las máquinas todo el tiempo están negociando claves cierto claves para algoritmos, descifrados simétricos descifrados simétrico claves de sesión claves de pseudo aleatorias para segundo factor autenticación todo el tiempo están negociando claves las aplicaciones que estamos usando en línea muchas de estas claves, vamos, incluso muchos algoritmos criptográficos utilizan estas claves que se conocen como pseudo aleatorias basadas en algo que se llama un vector de inicialización. Y el problema es que la computación convencional la computación binaria tiene serios líos con el cálculo de números aleatorios en realidad las máquinas no generan números aleatorios Entonces esto lo hayan escuchado antes. Emma porque lo que está demostrado computacionalmente Al ojo humano le cuesta mucho entender esto es que a partir de cierto número de bits en un número aleatorio se empieza a repetir el pedido, o sea empieza a ver un patrón eso es imperceptible a los humanos porque puede ser después de un millón de dos millones de tres millones de dígitos, por ejemplo se empieza a repetir un periodo no hay un patrón de la firma Y eso ha hecho que algunos algoritmos criptográficos se hayan depreciado, no? Ya se consideran obsoletos porque porque efectivamente hacen un mal cálculo de las claves donde una máquina con buen poder de cómputo es capaz de encontrar ese patrón y capaz de descubrir la clave en un proceso de autoanálisis, por ejemplo, el algoritmo rc4 no lo vamos a diseccionar acá, se utilizaba mucho en el protocolo web. Esto lo va a notar por acá una agenda protocolo web. que este es el de Wireless que se utilizaba antes del WPA estoy utilizado un algoritmo que se llama el algoritmo rc4 y esto era un cifrado de flujo utilizando lo que se llama un vector de inicialización un nivel y hay herramientas Cali las tienen entre otras cosas ahí en bebidas como el Air Dong que permiten crackearse una clave de autenticación web muy fácil un Access en cuestión de minutos, porque lo que se demostró Es que después de cierto número de tramas unos cuantos millones de tramas pero Millones de tramas en una red se generan en cuestión de minutos el vector de inicialización, o sea ese patrón pseudo aleatorio se empieza a repetir con lo cual la clave se puede predecir fácilmente entonces Hay ciertos libros con eso porque fíjense que todas las funciones random. de la mayoría de lenguajes de programación de todos los lenguajes de programación utilizan un sitio una semilla cierto Y esa Y esa semilla es la que finalmente le le da la posibilidad de aleatorizar pues randomizar utilizando una expresión errónea. Pero es pseudo porque en algún momento se empieza a repetir un periodo, está demostrado matemáticamente y computacionalmente la computación cuántica, una de los retos que tiene es por ejemplo, eso generar un número del número más grande aleatorio, sin que se repita un pedido. Eso es uno de los tantos retos de la computación cuántica o generar el número primo más grande, después hablaremos Por qué número más grande o el número de trazos de curvas elípticas que nos permitan encontrar un factor de de multiplicación de curvas mucho más altos. Iluminaremos también cuando hablemos de de aquí en este tema, vamos a hablar de criptografía curvas eléctricas, que es un método muy muy importante en estos tiempos. Porque reitero se puede predecir, no a los humanos pero se puede predecir. Hay algunas técnicas que ayudan a a minimizar un poquito ese lío de la de la de la pseudo la autoridad no es perfecto, pero mejoran algo y es que en realidad lo único estocástico que hay en la vida es la naturaleza cierto el comportamiento de la naturaleza es bastante estocástico que los sistemas de predicción de clima, por ejemplo, en las zonas tropicales son cargados de variables que que efectivamente cualquier variable a veces puede influir en que el sistema va. Una predicción que en una hora va a llover Puede que no llueva y salga mucho el radiante cierto Entonces lo que se ha buscado en algunas funciones semilla para calcular un sol delatos en la criptografía es pedir aumentar la entropía con interacción con la naturaleza curioso Entonces por ejemplo algunos algoritmos criptográficos leen datos de la naturaleza, por ejemplo. La temperatura del procesador es un dato muy aleatorio cierto porque no se puede predecir la temperatura del procesador puede generar muchas cosas en los sistemas de almacenamiento de disco que no son de estado sólido, sino Los mecánicos acelerar el disco. Entonces hay un protocolo lo lo vamos a practicar en en el área en la unidad de protocolos criptográficos se llama pgp significa es muy curioso porque cuando está calculando las claves algo raro porque cuando usted computacionalmente está ejecutando. Un proceso pues uno sabe que los computadores tienen multitasking y multi trading Pero uno antes uno ve que es un proceso pesado uno como que deja quietica la máquina un momento no se entiende que estás compilando un programa o estás haciendo un despliegue de algo, pues no, no vas a estar compilando un programa como indegenerado, pues es muy confiado en su máquina. Si usted está compilando un programa importante y a la vez está corriendo un juego de Xbox Pues hay cosas que uno no le A robar cómputo a su máquina, no? Y lo mismo ocurre en servidores, pero aquí es curioso porque cuando Piggy pista calculando las claves para aumentar la entropía le pide al usuario que cargue la máquina, o sea, le sale un mensaje de diálogo, le dice mueva el mouse aleatoriamente entonces claro, el movimiento del mouse no es predecible Entonces eso lo convierte las coordenadas del movimiento del mouse. Él no puede saber cómo mover el mouse yo, por ejemplo a lo que va a ser, por ejemplo fabiano lo que va a ser Juan Carlos A lo mejor uno lo mueve en línea rectas, otro empieza a hacer círculos ahí a la topa tolondra. Otro empieza a hacer diagonales, entonces fíjese que es muy aleatorio realmente ese movimiento del mouse, esas coordenadas, se utilizan como funciones semillas para calcular las claves o por ejemplo dice haga búsquedas exhaustivas dentro del disco duro. Entonces usted hace un find por ejemplo o el sistema operativo Windows hace una búsqueda y un patrón de un archivo dentro de todo el disco duro eso acelera mucho el disco en los discos mecánicos o haga cargue la red entonces empieza a leer Flags importantes en el tráfico de red que no están basados en patrones, sí me tiene la idea, o sea, buscando como aumentar la entropía para el cálculo de las claves, porque lo que se ha demostrado es que a partir de ciertos números de bits el patrón de la clave empieza a repetirse es un problema de pseudo a loteroideidad, por eso aquí no se utiliza el concepto de números aleatorios y unos pseudo aleatorios. Son algoritmos determinísticos, no son estocásticos, no es un problema de la criptografía, por eso les hablaba al principio de la entropía como juega con papel tan importante dentro de la dentro de aumentar ese grado de incertidumbre en el cálculo y una clave para que una máquina no la pueda predecir el humano le cuesta, pero la máquina lo hace bien Esto lo que les contaba el cifrado de bloque, pues es partir el bloque de longitud variable entera un Peta un giga, unos cuantos megas unos cuantos caen bloquecitos más pequeños y realizar procesos descifrados independiente para cada uno de de esos bloques.

El cifrado moderno finalmente, por eso hablábamos de estos métodos convencionales. de la criptografía clásica de sustitución y de permutación cierto en realidad, lo que se usan estos tiempos es Combinar esos métodos a construir un pack Line de métodos de sustitución con métodos de permutación O sea que la criptografía moderna es eso es combinarme claro métodos más elaborados estructuras digamos de permutación y de sustitución Pues digamos más complejas que el cifrado de César pues o que el cifrado Villar pero pero Efectivamente es eso entonces es un es un es un flujo de trabajo donde la salida, por ejemplo de un método de permutación cierto se convierte en la entrada de unas cajas de sustitución Entonces se llaman como ese Box y Box cierto permutation Box y sustitution Box o sea cajas de sustitución y cajas de permutación donde lo que hago es sustituir unos bits por otros cierto o permutar los bis dentro de una estructura unidimensional o bidimensional incluso hay algunos algoritmos que ya tienen matrices tridimensionales para hacer procesos de de de permutación entonces eso se convierte en un flujo cierto en un pipeline donde una caja de permutación le me da una salida. Una sustituciones luego otra permutación depende del algoritmo cierto y de hecho vamos a hacer una disección de un par de algoritmos donde vamos y eso se parte también del laboratorio. Donde vamos a mirar un poco Cómo cómo cómo se definen esas estructuras de permutación y de sustitución Cómo se interactúan con ellas y cómo se realiza todo el proceso criptográfico que finalmente se repite en una en un conjunto de instrucciones basados en unos estándares Pues que ya están avalados de alguna manera por la industria y por organizaciones. Esto ya empiezo a explicar un poquito sobre el tema de criptografía asimétrica, la criptografía asimétrica es la que ha existido desde la criptografía clásica Y es que se utiliza la misma clave para cifrar y para descifrar cierto. Esto va muy bien en los cifrados en reposo O sea si yo voy a almacenar alguna información en en discos cifrada o armonizar contraseñas de los usuarios en algunos sistemas de autenticación, pero claro la criptografía asimétrica tienes sus limitaciones por ejemplo en intercambio en un canal público. lo que se conoce en ciberseguridad como en una en un en un canal inseguro internet per se considera un canal inseguro cierto otra cosa es que claro tengamos protocolos en inscripción VPN pasarelas criptográficas Sí pero per se es débil cierto es débil es un canal que se puede interceptar que se pueden hacer ataques de Marín de middle que se puede hacer sniffin que se puede hacer spoofing con lo cual, pues se considera un canal inseguro miren que la criptografía asimétrica tiene un problema ahí cierto porque entonces si yo por muy fuerte que sea algoritmo digamos que el algoritmo criptográfico más reciente es de criptografía simétrica muy bueno que están robusto con eso cifran esto lo vamos a estudiar También acá con eso cifran las los ranson Word por ejemplo los ataques los sistemas de almacenamiento se cifran con Hades en 256 y fueron demorar trillones de años romper una clave de aves en 256 Claro pero aquí entra una paradoja cierto la paradoja de cómo intercambiamos una clave en un canal inseguro, o sea, yo le yo sí fui un mensaje con una clave y aquí se utiliza el concepto efectivamente simétrico la misma clave para cifrar y descifrar, por ejemplo lo que tú haces con un Access Point tú tienes una clave para comunicarte con el Access simétrica es un aire aquí una clave pre compartida que está anotada en el router o del adicto el operador de telefonía o te la dictó el administrador de la red o está notada por ahí en alguna parte cierto es una clave pre compartida cierto pero cómo hacemos en un canal Yo estoy en Colombia y mis receptor está en Corea cierto, voy a mandar un mensaje cifrado con triple des conades con otro tipo de algoritmos simétricos entonces utilizan mucho en ti y listo entonces Define una clave muy robusta la clave y cómo le mando la clave para que descifre el mensaje no Si fueron la clave sí Y cómo le mando la clave para descifrar la clave cierto se vuelve Un parado entonces ahí la criptografía asimétrica tiene estas limitaciones de ahí surge la criptografía asimétrica que también la vamos a entender un par de algoritmos, maravillosos extraordinarios Pues que han valido Incluso el premio Nobel Alan algo muy importante dentro de los procesos descifrado esto ocurre tanto para el cifrado simétrico más simétrico no se preocupe que todavía no ha explicado ninguno de los dos en detalle. Es la gestión de los bloques cierto, repito, esto lo lo he dicho en múltiples ocasiones en estos tiempos, Pues tú no tendrás que implementar un algoritmo criptográfico desde cero finalmente lo que vas a hacer es instanciar una clase de de alguna paquete de alguna criptográfica dentro de algún lenguaje y parametrizarlo si tienes que saber qué tipo de algoritmo vas a utilizar porque repito Depende lo que quieras hacer que eso es confidencialidad y privacidad se va a intercambiar por una red es cifrado en reposo descifrado en tránsito o es para firma digital para garantizar integridad o es para no repudio entonces? Pues no hay una pócima mágica para decir no es que siempre coste algoritmo para todo. No es así, pero hay que saber parametrizarlo y uno de los tantos parámetros que se debe setear cuando se distancia un algoritmo criptográfico es cómo voy a hacer la gestión de los bloques O sea si tú tienes un bloque, pues que no sé porque aquí no me está saliendo. El el que pasa el dibujitos acá. que estoy muy pobre mido que No me sale La Barrita para hacer un dibujito. Bueno, no pasa nada. Tú tienes un bloque de longitud variable. Tenía Perdón un segundito.
```
